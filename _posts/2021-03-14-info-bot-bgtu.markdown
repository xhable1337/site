---
layout: post
title:  "Инфо-бот БГТУ — от идеи до реализации"
date:   2021-03-14 00:40:00 +0300
categories:
---

# Инфо-бот БГТУ — от идеи до реализации

![Аватар инфо-бота БГТУ](https://github.com/xhable1337/site/raw/master/images/bgtu-bot-pic.jpg)

## В начале было слово...
Откуда возникла идея написать бота, который бы предоставлял доступ к расписанию, не выходя из любимого мессенджера? Вернёмся в 2016 год.
Я — ученик 9 класса средней школы. Люблю программировать (как и сейчас, впрочем), но на тот момент дальше консольных приложений, каким бы уровень их сложности ни был, дело не заходило. Узнал о Telegram, насколько я помню, от какого-то из пабликов ВК. Знакомство с ботами происходило постепенно: с расширением аудитории мессенджера росло и количество каналов, ботов и прочего контента, и к 2017 году Telegram заинтересовал меня с точки зрения интерфейсной составляющей. Менюшки, кнопочки, Markdown форматирование в ботах выглядели просто, неназойливо и доносили информацию с первого взгляда. 

## Знакомство с Telegram Bot API
Время шло, вместе с ним — и мой прогресс. В 2017 году я уже создал нескольких ботов, но их возможности не были обширны. Если сказать точнее — применения этим возможностям в жизни абсолютно не было, такая себе «проба пера». Как раз тогда я задумался, какой из аспектов повседневной жизни можно упростить.
Рутиной в тот момент была, само собой, школа. Заполнять дневник я перестал ещё довольно давно, а расписание уроков было у меня на телефоне в виде фотографии. Почему бы не совместить два в одно, сделав бота с получением расписания?

## Первая версия бота с расписанием
Спустя неделю изучения библиотеки [pyTelegramBotAPI](https://github.com/eternnoir/pyTelegramBotAPI) (кстати, не советую её использовать), Github и [Heroku](https://heroku.com) (сервис для размещения кода), мной была написана первая версия. Никаких парсеров и сложной логики — данные о расписании хранились в «хардкоде». Впрочем, в 10 классе бот претерпел глобальные изменения, связанные с переходом на асинхронный фреймворк [aiogram](https://github.com/aiogram/aiogram). Из-за его особенностей бот перестал неожиданно «падать» и обрёл стабильность. Таким образом бот существовал до 11 класса. И да, каждый год мне приходилось вручную заполнять массивы с расписанием :)

## Судьба бота после поступления в университет
Сдав экзамены, я поступил в Брянский государственный технический университет. Новое место учёбы, разные корпуса, аудитории, преподаватели, дисциплины… Все казалось таким чужим, но нужно осваиваться. Утро первого учебного дня я начал с уже привычного открытия диалога с ботом, и тут меня осенило: расписание-то не подходит! И менять его придётся уже не один раз в год, а два! Что ж, некоторое время спустя я создал нового бота с другим юзернеймом, а именно [@BGTU_IVT1_bot](https://t.me/BGTU_IVT1_bot). Хотелось, чтобы одногруппники тоже попробовали использовать его, а старый юзернейм никак не клеился с университетом. Недолго думая, я заполнил массив с расписанием вручную, до тех пор, пока я не напишу парсер. Также сделал функцию определения корпуса университета по аудитории, которая оказалась очень кстати на первых порах. 

## Расширяем масштабы
Получив фидбек от одногруппников, я понял, что бот оказался весьма полезным. В голове возникли наполеоновские планы по захвату всего первого курса :D 
Естественно, несерьёзно хранить данные о всех группах первого курса в массивах и обновлять их вручную каждый семестр. Для хранения я выбрал нереляционную СУБД [MongoDB](https://www.mongodb.com/), а для обновления мне пришлось писать парсер сайта университета, благо, что он имеется и поддерживается в рабочем состоянии. Парсер дался мне с некоторым трудом, но всё же мне удалось перебороть кривоватую разметку сайта и получить все данные нажатием одной кнопки. Бинго!

## Что же сейчас?
На момент написания этого поста (14.03.2021), в базе данных бота находится 182 пользователя из разных групп и факультетов первого курса БГТУ. Считаю, что это достойное число, и не собираюсь останавливаться на достигнутом. Впереди — студенческая конференция, расширение бота до абсолютно всех групп, всех годов поступления, типов и уровней образования, имплементация функций для преподавателей. Очень надеюсь, что эта работа будет полезна и для следующих студенов, а бот будет работать и после моего выпуска :)

## To be continued...
